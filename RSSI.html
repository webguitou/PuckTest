<html>
 <head>
   <style>
     body { margin:0;  }
     svg {
       display:block; position:absolute;
       top:0%; left:0%; width:100%; height:100%;
     }
   </style>    
 </head>
 <body>

  <script src="https://www.puck-js.com/puck.js"></script>
  <script type="text/javascript">
  var connection;
  
  
  if (connection) {
        connection.close();
        connection = undefined;
  }
  
  document.body.onclick = function() {
     console.log(connection)
     
     if( connection == "undefined"){
         console.log("undefined");
         return false;
     }
   
     if(connection.isOpen || connection.isOpening){
        return  false;
     }
   
     Puck.connect(function(c) {
           console.log(c);
           if (!c) {
             alert("Couldn't connect!");
             return;
           }
           connection = c;
           // Handle the data we get back, and call 'onLine'
           // whenever we get a line
           var buf = "";
           connection.on("data", function(d) {
             buf += d;
             var i = buf.indexOf("\n");
             while (i>=0) {
               onLine(buf.substr(0,i));
               buf = buf.substr(i+1);
               i = buf.indexOf("\n");
             }
           });
       });
  }
  </script>
</body>
</html>
